<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

    <link rel="stylesheet" href="../css/dashboard.css" />
</head>

<body>
    <div id="header"></div>
    <div class="container-fluid p-4">
        <!-- Header -->
        <header class="header d-flex flex-column flex-sm-row align-items-center justify-content-between mb-4">
            <div class="text-start ">
                <p class="greeting mb-0">Halo! Fransiska <span>üëãüèª</span></p>
                <p class="subtext mb-0">Selamat Datang Kembali</p>
            </div>
            <button type="button" class="btn btn-primary btn-primary-custom mt-3 mt-sm-0" data-bs-toggle="modal"
                data-bs-target="#logoutModal">
                Log Out
            </button>

            <!-- Modal Logout -->
            <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content custom-logout-modal text-center p-3">
                        <div class="modal-body">
                            <img src="../assets/logout.svg" alt="Logout" style="width: 140px;height: 140px">
                            <h5 class="fw-bold">Keluar dari Sistem Apotek?</h5>
                            <p class="text-muted">Apakah Anda yakin ingin keluar?</p>
                            <div class="d-flex justify-content-center gap-3 mt-4">
                                <button type="button" class="btn btn-outline-primary px-4"
                                    data-bs-dismiss="modal">Batal</button>
                                <button type="button" class="btn btn-primary px-4"
                                    onclick="window.location.href='login.html'">Keluar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- Right container -->


        <div class="container-fluid">
            <div class="row gx-2 justify-content-between">
                <div class="col-md-8 col order-sm-8 order-md-8">
                    <main class="main-container">
                        <!-- Left container -->
                        <div class="left-section">
                            <div class="container-custom">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h1 class="header-title">Antrian Transaksi</h1>
                                    <button type="button" class="btn-new-order"
                                        onclick="window.location.href='pemesanan.html'">
                                        <i class="fas fa-plus"></i> Pesanan Baru
                                    </button>
                                </div>

                                <form class="mb-4 position-relative">
                                    <input type="search" class="form-control form-control-custom"
                                        placeholder="Cari Antrean" aria-label="Cari Antrean" />
                                    <i class="fas fa-search position-absolute"
                                        style="top: 50%; right: 1rem; transform: translateY(-50%); color: #b9bccb;"
                                        aria-hidden="true"></i>
                                </form>

                                <div class="row g-3">
                                    <div class="col-12 col-sm-6">
                                        <div
                                            class="border rounded bg-white p-3 h-100 d-flex flex-column justify-content-between">
                                            <div class="d-flex justify-content-between align-items-center mb-1">
                                                <div class="order-id">Ord_id 312</div>
                                                <div class="status-badge">In-Progress</div>
                                            </div>
                                            <div class="order-name" tabindex="0">Pak Pawat</div>
                                            <div class="order-desc">CTM 4 mg, Alprazolam 0,5 mg</div>
                                            <div class="d-flex gap-2">
                                                <button type="button"
                                                    class="btn btn-outline-primary btn-outline-primary-custom"
                                                    onclick="showOrderDetail('312', '15 Juni 2025, 10:30', 'Pak Pawat', '45 tahun', ['CTM 4 mg', 'Alprazolam 0,5 mg'], 'In-Progress', 'Resep dari Dr. Andi Susanto', 'Jl. Mawar No. 123, Malang')">
                                                    Detail Pesanan
                                                </button>
                                                <button type="button" class="btn btn-primary btn-primary-custom">
                                                    Tandai Selesai
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-12 col-sm-6">
                                        <div
                                            class="border rounded bg-white p-3 h-100 d-flex flex-column justify-content-between">
                                            <div class="d-flex justify-content-between align-items-center mb-1">
                                                <div class="order-id">Ord_id 313</div>
                                                <div class="status-badge">In-Progress</div>
                                            </div>
                                            <div class="order-name" tabindex="0">Bu Mikasa</div>
                                            <div class="order-desc">Sanmol 500 mg, OBH Combi</div>
                                            <div class="d-flex gap-2">
                                                <button type="button"
                                                    class="btn btn-outline-primary btn-outline-primary-custom"
                                                    onclick="showOrderDetail('313', '15 Juni 2025, 11:15', 'Bu Mikasa', '32 tahun', ['Sanmol 500 mg', 'OBH Combi'], 'In-Progress', 'Obat bebas untuk demam dan batuk', 'Jl. Melati No. 456, Malang')">
                                                    Detail Pesanan
                                                </button>
                                                <button type="button" class="btn btn-primary btn-primary-custom">
                                                    Tandai Selesai
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-12 col-sm-6">
                                        <div
                                            class="border rounded bg-white p-3 h-100 d-flex flex-column justify-content-between">
                                            <div class="d-flex justify-content-between align-items-center mb-1">
                                                <div class="order-id">Ord_id 314</div>
                                                <div class="status-badge">In-Progress</div>
                                            </div>
                                            <div class="order-name" tabindex="0">Bu Sumiyati</div>
                                            <div class="order-desc">Paracetamol 500 mg, Ibuprofen 200 mg</div>
                                            <div class="d-flex gap-2">
                                                <button type="button"
                                                    class="btn btn-outline-primary btn-outline-primary-custom">
                                                    Detail Pesanan
                                                </button>
                                                <button type="button" class="btn btn-primary btn-primary-custom">
                                                    Tandai Selesai
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-12 col-sm-6">
                                        <div
                                            class="border rounded bg-white p-3 h-100 d-flex flex-column justify-content-between">
                                            <div class="d-flex justify-content-between align-items-center mb-1">
                                                <div class="order-id">Ord_id 315</div>
                                                <div class="status-badge">In-Progress</div>
                                            </div>
                                            <div class="order-name" tabindex="0">Pak Earth</div>
                                            <div class="order-desc">Decolgen, Lansoprazole 10 mg</div>
                                            <div class="d-flex gap-2">
                                                <button type="button"
                                                    class="btn btn-outline-primary btn-outline-primary-custom">
                                                    Detail Pesanan
                                                </button>
                                                <button type="button" class="btn btn-primary btn-primary-custom">
                                                    Tandai Selesai
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-12 col-sm-6">
                                        <div
                                            class="border rounded bg-white p-3 h-100 d-flex flex-column justify-content-between">
                                            <div class="d-flex justify-content-between align-items-center mb-1">
                                                <div class="order-id">Ord_id 316</div>
                                                <div class="status-badge">In-Progress</div>
                                            </div>
                                            <div class="order-name" tabindex="0">Pak Polisi</div>
                                            <div class="order-desc">Simvastatin 10 mg, Metformin 500 mg</div>
                                            <div class="d-flex gap-2">
                                                <button type="button"
                                                    class="btn btn-outline-primary btn-outline-primary-custom">
                                                    Detail Pesanan
                                                </button>
                                                <button type="button" class="btn btn-primary btn-primary-custom">
                                                    Tandai Selesai
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-12 col-sm-6">
                                        <div
                                            class="border rounded bg-white p-3 h-100 d-flex flex-column justify-content-between" data-order-id="317">
                                            <div class="d-flex justify-content-between align-items-center mb-1">
                                                <div class="order-id">Ord_id 317</div>
                                                <div class="status-badge">In-Progress</div>
                                            </div>
                                            <div class="order-name" tabindex="0">Bu Pur</div>
                                            <div class="order-desc">Allupurinol 100 mg</div>
                                            <div class="d-flex gap-2">
                                                <button type="button"
                                                    class="btn btn-outline-primary btn-outline-primary-custom">
                                                    Detail Pesanan
                                                </button>
                                                <button type="button"
                                                    class="btn btn-primary btn-primary-custom complete-btn"
                                                    onclick="markAsCompleted(this, '317')">
                                                    Tandai Selesai
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </main>
                </div>
                <div class="col-md-4 ">
                    <div class="container-fluid">
                        <div class="row g-3">
                            <aside class="sidebar">
                                <div class="stats-container">
                                    <div class="stats-card">
                                        <div class="stats-content">
                                            <h3>Antrian</h3>
                                            <p class="stats-number">6</p>
                                        </div>
                                        <i class="fas fa-users stats-icon"></i>
                                    </div>

                                    <div class="stats-card">
                                        <div class="stats-content">
                                            <h3>Total Pelanggan Hari Ini</h3>
                                            <p class="stats-number">18</p>
                                        </div>
                                        <i class="fas fa-user-friends stats-icon"></i>
                                    </div>
                                </div>
                            </aside>



                        </div>
                    </div>
                </div>

            </div>


            <!-- Modal Detail Pesanan -->
            <div class="modal fade" id="orderDetailModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Detail Pesanan</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <p><strong>Order ID:</strong> <span id="modal-order-id">-</span></p>
                            <p><strong>Waktu Pesan:</strong> <span id="modal-order-time">-</span></p>
                            <p><strong>Nama Pelanggan:</strong> <span id="modal-customer-name">-</span></p>
                            <p><strong>Umur Pasien:</strong> <span id="modal-patient-age">-</span></p>
                            <p><strong>Status:</strong> <span class="badge bg-primary" id="modal-status">-</span></p>
                            <p><strong>Catatan:</strong> <span id="modal-notes">-</span></p>
                            <p><strong>Alamat:</strong> <span id="modal-address">-</span></p>
                            <p><strong>Daftar Obat:</strong></p>
                            <ul id="modal-medications">
                                <!-- Medications will be populated here -->
                            </ul>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="footer"></div>
    <script src="../js/layout.js"></script>

    <script>
        function filterOrders() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const orders = document.querySelectorAll('.order-card');

            orders.forEach(order => {
                const text = order.textContent.toLowerCase();
                if (text.includes(filter)) {
                    order.style.display = '';
                } else {
                    order.style.display = 'none';
                }
            });
        }
        function showOrderDetail(orderId, orderTime, customerName, patientAge, medications, status, notes, address) {
            document.getElementById('modal-order-id').textContent = orderId;
            document.getElementById('modal-order-time').textContent = orderTime;
            document.getElementById('modal-customer-name').textContent = customerName;
            document.getElementById('modal-patient-age').textContent = patientAge;
            document.getElementById('modal-status').textContent = status;
            document.getElementById('modal-notes').textContent = notes;
            document.getElementById('modal-address').textContent = address;

            // Populate medications as simple list
            const medicationsContainer = document.getElementById('modal-medications');
            medicationsContainer.innerHTML = '';

            medications.forEach((medication, index) => {
                const medicationDiv = document.createElement('div');
                medicationDiv.className = 'border rounded p-2 mb-2 bg-light';
                medicationDiv.textContent = `${index + 1}. ${medication}`;
                medicationsContainer.appendChild(medicationDiv);
            });

            const modal = new bootstrap.Modal(document.getElementById('orderDetailModal'));
            modal.show();
        }

        function markAsCompleted(button, orderId) {
            // Find the order card
            const orderCard = document.querySelector(`[data-order-id="${orderId}"]`);
            
            if (orderCard && !orderCard.classList.contains('completed')) {
                // Add completed class for styling
                orderCard.classList.add('completed');
            // Update status badge
                const statusBadge = orderCard.querySelector('.status-badge');
                statusBadge.textContent = 'Selesai';
                statusBadge.classList.add('completed');
                
                // Update button
                button.textContent = '‚úì Selesai';
                button.classList.remove('btn-primary', 'btn-primary-custom');
                button.classList.add('btn-success-custom');
                button.disabled = true;
                button.onclick = null;
                
                // Add completion animation
                orderCard.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    orderCard.style.transform = 'scale(1)';
                }, 300);
                
                // Update counters
                completedCount++;
                queueCount--;
                
                document.getElementById('completedOrders').textContent = completedCount;
                document.getElementById('queueCount').textContent = queueCount;
                
              
            }
        }

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>